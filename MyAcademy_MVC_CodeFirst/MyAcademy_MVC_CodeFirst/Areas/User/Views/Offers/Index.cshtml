@using MyAcademy_MVC_CodeFirst.Data.Entities
@model List<InsurancePolicy>
@{
    ViewBag.Title = "Yeni Teklif Al";
    Layout = "~/Areas/User/Views/Shared/_UserLayout.cshtml";
}

<div class="max-w-7xl mx-auto">
    <div class="mb-8 text-center">
        <h2 class="text-3xl font-bold text-slate-800">Size Özel Sigorta Teklifleri</h2>
        <p class="text-slate-500 mt-2">Hayatınızı güvence altına alacak en uygun paketleri inceleyin.</p>
    </div>

    @if (TempData["Success"] != null)
    {
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6" role="alert">
            <strong class="font-bold">Harika!</strong>
            <span class="block sm:inline">@TempData["Success"]</span>
        </div>
    }

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        @foreach (var item in Model)
        {
            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden hover:shadow-xl transition-all duration-300 group">
                <div class="h-3 bg-primary"></div>
                <div class="p-8">
                    <div class="flex justify-between items-start mb-4">
                        <div class="p-3 bg-emerald-50 text-emerald-600 rounded-xl group-hover:bg-primary group-hover:text-white transition-colors">
                            @if (item.PolicyName.Contains("Sağlık"))
                            {<span class="material-symbols-outlined text-3xl">medical_services</span> }
                            else if (item.PolicyName.Contains("Araç") || item.PolicyName.Contains("Kasko") || item.PolicyName.Contains("Trafik"))
                            { <span class="material-symbols-outlined text-3xl">directions_car</span> }
                            else if (item.PolicyName.Contains("Ev") || item.PolicyName.Contains("Konut"))
                            { <span class="material-symbols-outlined text-3xl">home</span> }
                            else
                            { <span class="material-symbols-outlined text-3xl">shield</span>}
                        </div>
                        <span class="bg-slate-100 text-slate-600 text-xs font-bold px-3 py-1 rounded-full">YILLIK</span>
                    </div>

                    <h3 class="text-xl font-bold text-slate-800 mb-2">@item.PolicyName</h3>
                    <p class="text-slate-500 text-sm mb-6 line-clamp-2">@item.Description</p>

                    <div class="flex items-end gap-1 mb-6">
                        <span class="text-3xl font-bold text-primary">₺@item.Price.ToString("N0")</span>
                        <span class="text-slate-400 text-sm mb-1">/yıl</span>
                    </div>

                    <form method="post" action="/User/Offers/MakeRequest">
                        <input type="hidden" name="id" value="@item.PolicyID" />
                        <button class="w-full py-3 bg-slate-800 text-white rounded-xl font-medium hover:bg-primary transition-colors flex items-center justify-center gap-2">
                            Hemen Başvur <span class="material-symbols-outlined text-sm">arrow_forward</span>
                        </button>
                    </form>
                </div>
            </div>
        }
    </div>
</div>
